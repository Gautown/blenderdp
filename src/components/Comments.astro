---
interface Props {
  term?: string;
  category?: string;
}

const { term = '', category = '' } = Astro.props;
---

<div class="comments-section">
  <h2>评论</h2>
  <!-- Giscus组件将在客户端加载 -->
  <script 
    client:load
    src="https://giscus.app/client.js"
    data-repo="Gautown/blenderdp"
    data-repo-id="R_kgDOQcA4pw"
    data-category="Announcements"
    data-category-id="DIC_kwDOQcA4p84CztQg"
    data-mapping="title"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
  </script>
  
  <!-- 添加一个容器，用于显示Giscus -->
  <div class="giscus"></div>
  
  <!-- 添加备用容器 -->
  <div id="giscus-comments"></div>
  
  <!-- 添加说明文字 -->
  <div id="giscus-info" style="margin-top: 1rem; padding: 1rem; background-color: #f0f8ff; border: 1px solid #007acc; border-radius: 4px;">
    <h3>评论系统说明</h3>
    <p>评论系统由Giscus驱动，基于GitHub Discussions。</p>
    <p>如果您是第一次访问此页面，可能需要等待几秒钟来初始化评论系统。</p>
    <p>如果您已经留下了评论但看不到内容，请尝试刷新页面。</p>
    <p>如果您仍未看到评论框，请确保您已登录GitHub账户并授权Giscus应用。</p>
  </div>
</div>

<style>
  .comments-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #eee;
  }
  
  .comments-section h2 {
    margin-bottom: 1rem;
    color: #333;
  }
</style>