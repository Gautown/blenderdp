---
interface Props {
  term?: string;
  category?: string;
}

const { term = '', category = '' } = Astro.props;
---

<div class="comments-section">
  <h2>评论</h2>
  <!-- Giscus组件将在客户端加载 -->
  <script 
    client:load
    src="https://giscus.app/client.js"
    data-repo="Gautown/blenderdp"
    data-repo-id="R_kgDOQcA4pw"
    data-category="Announcements"
    data-category-id="DIC_kwDOQcA4p84CztQg"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
  </script>
  
  <!-- 调试信息 -->
  <div id="giscus-debug" style="margin-top: 1rem; padding: 1rem; background-color: #f0f8ff; border: 1px solid #007acc; border-radius: 4px;">
    <h3>评论系统调试信息</h3>
    <p>如果您看不到评论框，请检查以下事项：</p>
    <ol>
      <li>确保您已登录GitHub账户</li>
      <li>点击评论区域内的"Sign in with GitHub"按钮</li>
      <li>授权Giscus应用访问您的GitHub账户</li>
      <li>刷新页面后应能看到评论输入框</li>
    </ol>
    <p>如果仍然无法显示输入框，请联系网站管理员。</p>
  </div>
</div>

<style>
  .comments-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #eee;
  }
  
  .comments-section h2 {
    margin-bottom: 1rem;
    color: #333;
  }
  
  /* 隐藏调试信息，除非需要 */
  #giscus-debug {
    display: none;
  }
  
  /* 当giscus未加载时显示调试信息 */
  .giscus-error #giscus-debug {
    display: block;
  }
</style>